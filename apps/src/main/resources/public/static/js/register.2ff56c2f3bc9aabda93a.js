webpackJsonp([23,0],{0:function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var n=s(3),i=a(n),o=s(12),r=a(o),l=s(287),u=a(l);s(1);i.default.use(r.default),i.default.component("App",u.default),new i.default({el:"body"})},1:function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){return e<10?"0"+e:e}function i(e){var t=[];return t.push(e.getHours()),t.push(e.getMinutes()),t=t.map(n),t.join(":")}function o(e){var t=[];return t.push(e.getMonth()+1+"月"),t.push(e.getDate()+"日"),t=t.map(n),t.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.app=void 0;var r=s(13),l=a(r),u=s(3),c=a(u),d=s(10),p=a(d);c.default.component("user-card",p.default),c.default.filter("showTime",function(e){e=(0,l.default)(e);var t=Date.now()-e;return t/864e5>1||(new Date).getDate()-new Date(e).getDate()>0||(new Date).getMonth()-new Date(e).getMonth()>0||(new Date).getFullYear()-new Date(e).getFullYear()>0?o(new Date(e))+" "+i(new Date(e)):t/36e5>1?"今天 "+i(new Date(e)):Math.ceil(t/6e4)+"分钟前"});var f={getAts:function(e){var t=/(@[0-9a-zA-Z_\u0391-\uFFE5-]+$)|(@[0-9a-zA-Z_\u0391-\uFFE5-]+\s)/g;return e.match(t)},weiboFactory:function(e){return{weiboid:0,user:e,text:"",time:Date.now()+"",forward:0,comment:0,like:0,favourited:!1,liked:!1}},commentFactory:function(e){return{user:e,text:"",time:Date.now()+"",commentid:0,weiboid:0,comment_commentid:0,like:0,liked:!1}},operationFactory:function(e){return{userid:e,weiboid:0,name:null,target_userid:0,commentid:0,time:Date.now()+""}},userCardCache:{}};window.app=f,t.app=f},7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(1);t.default={props:["name","userid"],data:function(){return{isHover:!1,user:null,loading:!1,userLoading:!1}},methods:{handleFollow:function(){var e=this;this.loading=!0,this.user.followed=!this.user.followed;var t=a.app.currentUser,s=a.app.operationFactory(t.userid);s.target_userid=this.user.userid,this.following?this.$http.post("/follow",s).then(function(t){e.loading=!1}):this.$http.post("/follow/delete",s).then(function(t){e.loading=!1})},removeFan:function(){this.user.beFollowed=!1;var e=a.app.currentUser,t=a.app.operationFactory(e.userid);this.$http.post("/follower/delete",t).then(function(e){})},setHover:function(){var e=this;if(this.isHover=!0,!this.userLoading){if(this.userLoading=!0,this.userid&&(a.app.userCardCache[this.userid]||null===a.app.userCardCache[this.userid]))return this.user=a.app.userCardCache[this.userid],void(this.userLoading=!1);if(this.name&&(a.app.userCardCache[this.name]||null===a.app.userCardCache[this.name]))return this.user=a.app.userCardCache[this.name],void(this.userLoading=!1);var t=this.userid?"/userCard/id/"+this.userid:"/userCard/name/"+this.name;this.$http.get(t).then(function(t){var s=JSON.parse(t.data);a.app.userCardCache[e.userid?e.userid:e.name]=s,e.user=s,e.userLoading=!1})}}}}},8:function(e,t){},9:function(e,t){e.exports=' <span class=user-card-component> <span class=content-wrapper @mouseenter=setHover @mouseleave="isHover=false"> <slot></slot> </span> <div class=card v-show=isHover @mouseenter=setHover @mouseleave="isHover=false" transition=user-card> <div class=wrapper v-show="user && !userLoading"> <div class=upper> <a class=pic> <img :src=user.avatar width=50 height=50 /> </a> <div class=name> <a href=/user/{{user.userid}}>{{user.username}}</a> </div> <div class=intro> {{user.intro}} </div> </div> <div class=lower> <div class=count> <ul> <li><a href=#>关注<em>275</em></a></li> <li><a href=#>粉丝<em>860</em></a></li> <li><a href=#>微博<em>8326</em></a></li> </ul> </div> <div class=operation v-if="currentUser.userid != user.userid"> <div class=button-wrapper> <button href=javascript:void(0); class=W_btn_b @click=handleFollow> <span v-if="user.followed && user.beFollowed &&!loading"> <em class="W_ficon ficon_addtwo S_ficon">Z</em>互相关注 </span> <span v-if="loading && user.followed "> <i class=W_loading></i>关注中 </span> <span v-if="user.followed && !user.beFollowed &&!loading"> <em class="W_ficon ficon_right S_ficon">Y</em>已关注 </span> <span v-if="loading && !user.followed "> <i class=W_loading></i>取消关注中 </span> <span v-if="!user.followed && user.beFollowed &&!loading"> <em class="W_ficon ficon_right S_ficon">Y</em><em class="W_vline S_line1"></em><em class="W_ficon ficon_add">+</em>关注 </span> <span v-if="!user.followed && !user.beFollowed &&!loading"> <em class="W_ficon ficon_add S_ficon">+</em>关注 </span> </button> </div> <div class=button-wrapper> <a href=javascript:void(0); class="W_btn_b W_btn_pf_menu"> <em class="W_ficon ficon_menu S_ficon">=</em> </a> <div class=menu v-if=user.beFollowed> <div class=list_wrap> <div class="list_content W_f14"> <ul class=list_ul> <li class=item v-if=user.beFollowed @click=removeFan><a class=tlink>移除粉丝</a></li> </ul> </div> </div> </div> </div> </div> </div> </div> <div class="wrapper not-exist" v-show="!user && !userLoading"> <span>抱歉，这个昵称不存在哦！^_^</span> </div> <div class="wrapper loading" v-show=userLoading> <i class=W_loading></i> <span>正在加载，请稍后...</span> </div> </div> </span> '},10:function(e,t,s){var a,n,i={};s(8),a=s(7),n=s(9),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(o.template=n),o.computed||(o.computed={}),Object.keys(i).forEach(function(e){var t=i[e];o.computed[e]=function(){return t}})},146:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(87);t.default={data:function(){return{blur:"",email:"",password:"",name:"",registerSuccess:!1}},methods:{mailValidate:function(e){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/g.test(e)?{validStatus:"success"}:{validStatus:"error",tips:"请输入正确邮箱！"}},nameValidate:function(e){return/^[0-9a-zA-Z_\u0391-\uFFE5-]+$/g.test(e)?{validStatus:"success"}:{validStatus:"error",tips:"昵称仅可使用中文，英文字母，与下划线！"}},submit:function(){var e=this;this.$refs.form.validateFields(function(t){if(t.isvalid){var s={email:e.email,password:e.password,name:e.name};e.$http.post("/register",s).then(function(t){var s=JSON.parse(t.data);s.success?(e.registerSuccess=!0,document.cookie=t.headers.get("Set-Cookie"),setTimeout(function(){location.href="/"},5e3)):alert(s.reason)})}})}},components:{n3Form:a.n3Form,n3FormItem:a.n3FormItem,n3Input:a.n3Input,n3Alert:a.n3Alert,n3Row:a.n3Row,n3Column:a.n3Column,n3Container:a.n3Container}}},203:function(e,t){},245:function(e,t){e.exports=" <div class=register-main> <div class=reg-header> <div class=logo></div> </div> <div class=form-wrapper> <n3-container fluid> <n3-row> <n3-column :col=8 class=left-col> <n3-form v-ref:form> <n3-form-item need label=注册邮箱 :label-col=3> <n3-input name=name :value.sync=email :rules=\"[{type:'required'}]\" :custom-validate=mailValidate width=200px></n3-input> </n3-form-item> <n3-form-item need label=密码 :label-col=3> <n3-input name=name :value.sync=password :rules=\"[{type:'required'}]\" type=password width=200px></n3-input> </n3-form-item> <n3-form-item need label=昵称 :label-col=3> <n3-input name=name :value.sync=name :rules=\"[{type:'required'}]\" :custom-validate=nameValidate width=200px></n3-input> </n3-form-item> <n3-form-item :label-col=3> <a class=register-button href=javascript:void(0); @click=submit><span>立即注册</span></a> </n3-form-item> <n3-form-item :label-col=3 class=register-success :class=\"{'show': registerSuccess }\"> <n3-alert type=success message=注册成功！ description> 注册成功！5秒后转入首页！ </n3-alert> </n3-form-item> </n3-form> </n3-column> <n3-column :col=4 class=right-col> <div class=upper> 已有账号，<a href=/login>直接登录»</a> </div> </n3-column> </n3-row> </n3-container> </div> <footer class=clrfloat> <div class=left_link> <i class=footer_logo></i> <em class=company_name>北京微梦创科网络技术有限公司</em> <a href=http://weibo.com/aj/static/jww.html>京网文[2011]0398-130号</a> <a href=http://www.miibeian.gov.cn>京ICP备12002058号</a> </div> <div class=copy> <span>Copyright © 2009-2016 WEIBO</span> </div> </footer> </div> "},287:function(e,t,s){var a,n,i={};s(203),a=s(146),n=s(245),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(o.template=n),o.computed||(o.computed={}),Object.keys(i).forEach(function(e){var t=i[e];o.computed[e]=function(){return t}})}});