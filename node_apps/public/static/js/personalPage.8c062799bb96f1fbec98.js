webpackJsonp([1,0],[function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=i(3),n=s(o),r=i(14),a=s(r),c=i(294),u=s(c);i(1),i(43),i(13);n.default.use(a.default),n.default.component("App",u.default),window.Vue=n.default},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){return e<10?"0"+e:e}function n(e){var t=[];return t.push(e.getHours()),t.push(e.getMinutes()),t=t.map(o),t.join(":")}function r(e){var t=[];return t.push(e.getMonth()+1+"月"),t.push(e.getDate()+"日"),t=t.map(o),t.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.app=void 0;var a=i(15),c=s(a),u=i(3),l=s(u),p=i(12),d=s(p);l.default.component("user-card",d.default),l.default.filter("showTime",function(e){e=(0,c.default)(e);var t=Date.now()-e;return t/864e5>1||(new Date).getDate()-new Date(e).getDate()>0||(new Date).getMonth()-new Date(e).getMonth()>0||(new Date).getFullYear()-new Date(e).getFullYear()>0?r(new Date(e))+" "+n(new Date(e)):t/36e5>1?"今天 "+n(new Date(e)):Math.ceil(t/6e4)+"分钟前"});var f={getAts:function(e){var t=/(@[0-9a-zA-Z_\u0391-\uFFE5-]+$)|(@[0-9a-zA-Z_\u0391-\uFFE5-]+\s)/g;return e.match(t)},weiboFactory:function(e){return{weiboid:0,user:e,text:"",time:Date.now()+"",forward:0,comment:0,like:0,favourited:!1,liked:!1}},commentFactory:function(e){return{user:e,text:"",time:Date.now()+"",commentid:0,weiboid:0,comment_commentid:0,like:0,liked:!1}},operationFactory:function(e){return{userid:e,weiboid:0,name:null,target_userid:0,commentid:0,time:Date.now()+""}},userCardCache:{}};window.app=f,t.app=f},function(e,t,i){var s,o,n={};i(29),s=i(24),o=i(34),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},,function(e,t,i){var s,o,n={};i(39),s=i(38),o=i(40),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[{text:"[坏笑]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/50/pcmoren_huaixiao_thumb.png"},{text:"[舔屏]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_thumb.png"},{text:"[微笑]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/5c/huanglianwx_thumb.gif"},{text:"[嘻嘻]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0b/tootha_thumb.gif"},{text:"[哈哈]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6a/laugh.gif"},{text:"[可爱]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/14/tza_thumb.gif"},{text:"[可怜]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/af/kl_thumb.gif"},{text:"[挖鼻]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0b/wabi_thumb.gif"},{text:"[吃惊]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f4/cj_thumb.gif"},{text:"[害羞]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6e/shamea_thumb.gif"},{text:"[挤眼]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c3/zy_thumb.gif"},{text:"[闭嘴]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/29/bz_thumb.gif"},{text:"[鄙视]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/71/bs2_thumb.gif"},{text:"[爱你]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/lovea_thumb.gif"}];t.emotions=i},function(e,t,i){var s,o,n={};i(27),s=i(22),o=i(32),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){var s,o,n={};i(31),s=i(26),o=i(36),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1);t.default={props:["name","userid"],data:function(){return{isHover:!1,user:null,loading:!1,userLoading:!1,currentUser:s.app.currentUser}},methods:{handleFollow:function(){var e=this;this.loading=!0,this.user.followed=!this.user.followed;var t=s.app.currentUser,i=s.app.operationFactory(t.userid);i.target_userid=this.user.userid,this.user.followed?this.$http.post("/follow",i).then(function(t){e.loading=!1}):this.$http.post("/follow/delete",i).then(function(t){e.loading=!1})},removeFan:function(){this.user.beFollowed=!1;var e=s.app.currentUser,t=s.app.operationFactory(e.userid);t.target_userid=this.user.userid,this.$http.post("/follower/delete",t).then(function(e){})},setHover:function(){var e=this;if(this.isHover=!0,!this.userLoading){if(this.userLoading=!0,this.userid&&(s.app.userCardCache[this.userid]||null===s.app.userCardCache[this.userid]))return this.user=s.app.userCardCache[this.userid],void(this.userLoading=!1);if(this.name&&(s.app.userCardCache[this.name]||null===s.app.userCardCache[this.name]))return this.user=s.app.userCardCache[this.name],void(this.userLoading=!1);var t=this.userid?"/userCard/id/"+this.userid:"/userCard/name/"+this.name;this.$http.get(t).then(function(t){var i=t.data;s.app.userCardCache[e.userid?e.userid:e.name]=i,e.user=i,e.userLoading=!1})}}}}},function(e,t){},function(e,t){e.exports=' <span class=user-card-component> <span class=content-wrapper @mouseenter=setHover @mouseleave="isHover=false"> <slot></slot> </span> <div class=card v-show=isHover @mouseenter=setHover @mouseleave="isHover=false" transition=user-card> <div class=wrapper v-show="user && !userLoading"> <div class=upper> <a class=pic> <img :src="(user.avatar && user.avatar!=\'null\') ? user.avatar : \'http://tva1.sinaimg.cn/default/images/default_avatar_female_50.gif\'" width=50 height=50 /> </a> <div class=name> <a href=/user/{{user.userid}}>{{user.username}}</a> </div> <div class=intro> {{user.intro}} </div> </div> <div class=lower> <div class=count> <ul> <li><a href=/user/{{user.userid}}/follow>关注<em>{{user.following}}</em></a></li> <li><a href=/user/{{user.userid}}/fans>粉丝<em>{{user.fans}}</em></a></li> <li><a href=/user/{{user.userid}}>微博<em>{{user.weibo}}</em></a></li> </ul> </div> <div class=operation v-if="currentUser.userid != user.userid"> <div class=button-wrapper> <button href=javascript:void(0); class=W_btn_b @click=handleFollow> <span v-if="user.followed && user.beFollowed &&!loading"> <em class="W_ficon ficon_addtwo S_ficon">Z</em>互相关注 </span> <span v-if="loading && user.followed "> <i class=W_loading></i>关注中 </span> <span v-if="user.followed && !user.beFollowed &&!loading"> <em class="W_ficon ficon_right S_ficon">Y</em>已关注 </span> <span v-if="loading && !user.followed "> <i class=W_loading></i>取消关注中 </span> <span v-if="!user.followed && user.beFollowed &&!loading"> <em class="W_ficon ficon_right S_ficon">Y</em><em class="W_vline S_line1"></em><em class="W_ficon ficon_add">+</em>关注 </span> <span v-if="!user.followed && !user.beFollowed &&!loading"> <em class="W_ficon ficon_add S_ficon">+</em>关注 </span> </button> </div> <div class=button-wrapper v-if=user.beFollowed> <a href=javascript:void(0); class="W_btn_b W_btn_pf_menu"> <em class="W_ficon ficon_menu S_ficon">=</em> </a> <div class=menu v-if=user.beFollowed> <div class=list_wrap> <div class="list_content W_f14"> <ul class=list_ul> <li class=item v-if=user.beFollowed @click=removeFan><a class=tlink>移除粉丝</a></li> </ul> </div> </div> </div> </div> </div> </div> </div> <div class="wrapper not-exist" v-show="!user && !userLoading"> <span>抱歉，这个昵称不存在哦！^_^</span> </div> <div class="wrapper loading" v-show=userLoading> <i class=W_loading></i> <span>正在加载，请稍后...</span> </div> </div> </span> '},function(e,t,i){var s,o,n={};i(54),s=i(48),o=i(60),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){var s,o,n={};i(9),s=i(8),o=i(10),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={userid:"12345",username:"xingo",intro:"立派なショタコン",following:413,fans:758,weibo:8030,avatar:"http://tva2.sinaimg.cn/crop.802.675.420.420.180/6b8bbe7ejw8f8ixud41otj21kw17uqmz.jpg"},s={userid:"12345",username:"xingo",intro:"立派なショタコン",area:"上海 虹口",birthday:"1995-04-27",mail:"xingoxu@foxmail.com"};t.currentUser=i,t.fullUserData=s},,,function(e,t,i){var s,o,n={};i(30),s=i(25),o=i(35),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["currentUser","navNow","notification"],ready:function(){var e=this;window.addEventListener("scroll",this.windowScroll),window.addEventListener("keyup",function(t){78==t.keyCode&&e.showNewWeiboPopup()})},beforeDestroy:function(){window.removeEventListener("scroll",this.windowScroll)},data:function(){var e=this.notification&&(this.notification.at>0||this.notification.comments>0||this.notification.like>0);return{searchFocus:!1,isTop:!0,hasNotification:e}},methods:{windowScroll:function(e){return document.body.scrollTop>0?void(this.isTop=!1):void(this.isTop=!0)},showNewWeiboPopup:function(){this.$dispatch("showNewWeiboPopup")}}}},function(e,t){},function(e,t){e.exports=' <div> <nav class=top-nav :class="{\'has-alpha\': !isTop}"> <div class=center-zone> <div class=logo> <a href=/ > <span class=logo></span> </a> </div> <div class=search :class="{\'focus\': searchFocus}"> <form action=/search target=_blank method=get> <input type=text name=keywords autocomplete=off class=W_input placeholder=搜索微博、找人 @focus="searchFocus=true" @blur="searchFocus=false" @keyup.stop=false /> <button title=搜索 class="W_ficon ficon_search S_ficon">f</button> </form> </div> <div class=right-operation> <div class=site-nav> <ul> <li :class="{\'now\': navNow==\'homepage\'}"><a href=/ ><em class="W_ficon ficon_home S_ficon">E</em><em class=text>首页</em></a></li> <li :class="{\'now\': navNow==\'mypage\'}"><a href=/user/{{currentUser.userid}}><em class="W_ficon ficon_home S_ficon">H</em><em class=text>{{currentUser.username}}</em></a></li> </ul> </div> <div class=nav-func> <ul class="gn_set S_line1"> <li class=gn_set_list> <a href=javascript:void(0); class=""> <em class="W_ficon ficon_mail S_ficon">I</em> </a> <div class=menu> <ul> <li> <a href=/at>@我的 <span class=number v-if="notification.at>0">{{notification.at}}</span> </a> </li> <li> <a href=/comment>评论 <span class=number v-if="notification.comments>0">{{notification.comments}}</span> </a> </li> <li> <a href=/like>赞 <span class=number v-if="notification.like>0">{{notification.like}}</span> </a> </li> </ul> </div> </li> <li class=gn_set_list> <a href=javascript:void(0); class=""> <em class="W_ficon ficon_set S_ficon">*</em> </a> <div class=menu> <ul> <li><a href=/profile>个人资料</a> </li> <li><a href=/password>账号安全</a> </li> <li class="line S_line2"></li> <li><a href=/logout>退出</a> </li> </ul> </div> </li> <li class=gn_set_list> <a href=javascript:void(0); @click=showNewWeiboPopup><em class="W_ficon ficon_send S_ficon" title=新微博>ß</em></a> </li> </ul> <div class=gn_topmenulist_tips v-if=hasNotification> <a href=javascript:void(0); class="W_ficon ficon_close S_ficon" @click="hasNotification=false">X</a> <ul> <li v-if="notification.comments>0">{{notification.comments}}条新评论，<a href=/comment>查看</a> </li> <li v-if="notification.at>0">{{notification.at}}条新@我的，<a href=/at>查看</a> </li> <li v-if="notification.like>0">{{notification.like}}个新的赞，<a href=/like>查看</a> </li> </ul> </div> </div> </div> </div> </nav> <div class=new-weibo-popup> </div> </div> '},function(e,t,i){var s,o,n={};i(18),s=i(17),o=i(19),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){var s,o,n={};i(55),s=i(49),o=i(61),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(15),n=s(o);t.default={data:function(){return this.init_height=(0,n.default)(this.init_height),{}},props:["model","init_height","placeholder","disabled"],methods:{resizeTextArea:function(e){var t=this,i=e.target;setTimeout(function(){i.style.height=t.init_height+"px";var e=i.scrollHeight;t.init_height<e&&(i.style.height=e+"px")},0)}}}},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),n=s(o),r=i(16),a=s(r);t.default={props:["currentUser"],data:function(){return{showPopup:!1}},events:{show:function(){this.showPopup=!0},newWeiboSended:function(e){return this.showPopup=!1,!0}},components:{popup:n.default,publishContainer:a.default}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={left:0,top:0,currentX:0,currentY:0};t.default={props:{show:{default:!1,twoWay:!0}},data:function(){return{drag:!1}},ready:function(){document.addEventListener("mousemove",this.dragHandler),document.addEventListener("keyup",this.hide)},beforeDestroy:function(){document.removeEventListener("mousemove",this.dragHandler),document.removeEventListener("keyup",this.hide)},methods:{startDrag:function(e){this.drag=!0,i.top=this.$els.layer.style.top,i.left=this.$els.layer.style.left,i.currentX=e.clientX,i.currentY=e.clientY},dragHandler:function(e){if(this.drag){var t=e.clientX,s=e.clientY,o=t-i.currentX,n=s-i.currentY,r=this.$els.layer;r.style.left=parseInt(i.left)+o+"px",r.style.top=parseInt(i.top)+n+"px"}},stopDrag:function(e){this.drag=!1,i.top=this.$els.layer.style.top,i.left=this.$els.layer.style.left},hide:function(e){27==e.keyCode&&(this.show=!1)}},watch:{show:function(e,t){if(e){var i=this.$els.layer;i.style.top=window.innerHeight/2-103+"px",i.style.left=window.innerWidth/2-235+"px"}}}}},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(6),n=s(o),r=i(7),a=s(r),c=i(1);t.default={props:["currentUser","isWhite","isPopup"],data:function(){return{isEditing:!1,successSended:!1,inputWeibo:"",inputDisabled:!1,textareaFirstHeight:77,ctrlPressed:!1}},methods:{submit:function(){var e=this;if(0!=this.inputWeibo.length){this.inputDisabled=!0;var t=c.app.weiboFactory(c.app.currentUser);t.text=this.inputWeibo,t.ats=c.app.getAts(t.text),this.$http.post("/weibo",t).then(function(e){var i=e.data;t.weiboid=i.id}).then(function(){e.inputWeibo="",e.successSended=!0,setTimeout(function(){e.successSended=!1,e.$dispatch("newWeiboSended",t),e.inputDisabled=!1},2e3)})}},enterSubmit:function(e){this.ctrlPressed&&13==e.keyCode&&this.submit(),e.stopPropagation()}},events:{emotion:function(e){this.inputWeibo+=e}},components:{autoResizeTextarea:n.default,emotion:a.default}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(5);t.default={data:function(){return{emotions:s.emotions,showEmotion:!1}}}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){e.exports=" <textarea class=autoresize v-model=model @keydown=resizeTextArea :style=\"{\n  height: init_height+'px'\n}\" :placeholder=placeholder :disabled=disabled></textarea> "},function(e,t){e.exports=' <popup class="new-weibo popup-wrapper" :show.sync=showPopup> <span slot=title>有什么新鲜事想告诉大家？</span> <div class=popup-body-wrapper slot=body> <publish-container :is-popup=true :is-white=true :current-user=currentUser></publish-container> </div> </popup> '},function(e,t){e.exports=' <div class=popup-wrapper> <div class=popup-layer v-show=show transition=popup v-el:layer> <div class=popup-title @mousedown=startDrag @mouseup=stopDrag> <slot name=title><span>测试标题</span></slot> <span class=close><a href=javascript:; class="W_ficon ficon_close S_ficon" @click.stop="show=false">X</a></span> </div> <div class=popup-body> <slot name=body></slot> </div> </div> <div class=popup-outer v-show=show transition=opacity></div> </div> '},function(e,t){e.exports=' <div class=weibo-send-weibo-wrapper :class="{\'white\': isWhite}"> <header class=clrfloat> <p class="W_swficon ficon_swtxt" v-if=!isPopup> <em class=spac1>有什么新</em> <em class=spac2>鲜</em> <em class=spac3>事想告诉大家</em> <em class=spac4>?</em> </p> <span class="pull-right hot-weibo" v-show="!isEditing && inputWeibo.length == 0" v-if=!isPopup> <a href="">热门话题</a> <a href="">热门微博</a> </span> <span class="pull-right words-total" v-show="inputWeibo.length > 0"> 已输入<span :class="{\'red\': inputWeibo.length>140}">{{inputWeibo.length}}</span>字 </span> <span class="pull-right length-calc"></span> </header> <div class=input-wrapper :class="{\'editing\': isEditing}"> <auto-resize-textarea :model.sync=inputWeibo :init_height=textareaFirstHeight @focus="isEditing=true" @blur="isEditing=false" :disabled=inputDisabled @keydown.stop=enterSubmit @keydown.17="ctrlPressed=true" @keyup.17="ctrlPressed=false" @keyup.stop=false></auto-resize-textarea> <div class=success-sended-tip v-show=successSended> <i class="icon icon-background send-success"></i> <span>发布成功</span> </div> </div> <div class=input-func> <div class="multi pull-left"> <ul> <li> <emotion></emotion> </li> </ul> </div> <div class="func pull-right"> <button class=submit :disabled="!(inputWeibo.length > 0 && inputWeibo.length <= 140) || inputDisabled" @click=submit>发布</button> </div> </div> </div> '},function(e,t){e.exports=' <div class=emotion-wrapper> <a class="S_txt1 emotion-link" href=javascript:void(0); @click="showEmotion=!showEmotion"><em class="W_ficon ficon_face">o</em>表情</a> <div class=emotions-container v-show=showEmotion transition=fade-in> <div class=content> <div class=layer_faces> <ul class=list> <li v-for="icon in emotions" @click="$dispatch(\'emotion\',icon.text)"> <img :src=icon.src> </li> </ul> </div> </div> </div> </div> '},function(e,t,i){var s,o,n={};i(28),s=i(23),o=i(33),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["size","src","userid"]}},function(e,t){},function(e,t){e.exports=" <div class=normal-user-avatar> <user-card :userid=userid class=user-card-component> <a href=/user/{{userid}}> <img :src=\"(src&&src!='null') ? src :'http://tva1.sinaimg.cn/default/images/default_avatar_female_50.gif'\" :width=size :height=size /> </a> </user-card> </div> "},,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={userid:"987654321",username:"xingo",avatar:"http://tva2.sinaimg.cn/crop.802.675.420.420.180/6b8bbe7ejw8f8ixud41otj21kw17uqmz.jpg"},s={weiboid:"12345",user:i,text:"abcdefg，今天是个好天气@测试 ，[微笑]测试[哈哈]",pics:["http://wsqncdn.miaopai.com/stream/a9ukbYtdFibmwKEgeVboyQ___m.jpg","http://ww4.sinaimg.cn/large/6b8bbe7egw1f9rk0b5py8j20vx0hy0zl.jpg","http://ww1.sinaimg.cn/large/6b8bbe7egw1f9rk071we9j20vc0h5wm6.jpg","http://ww2.sinaimg.cn/large/6b8bbe7egw1f9wh3jile4j20xc0xcdw7.jpg"],time:"1479649004555",forward:30,comment:5,like:350,favourited:!1,liked:!1},o={weiboid:"123456789",text:"abcdefg，今天是个好天气@测试 ，[微笑]测试[哈哈]",time:"1479649079293",user:i,forwardWeibo:s,liked:!1,favourited:!0,like:0,forward:1,comment:3},n=[s,o];t.singleWeibo=s,t.forwardWeibo=o,t.timeline=n},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),n=s(o);t.default={data:function(){return{weiboID:0,showCancelFavouritePopup:!1}},methods:{cancelWeiboFavourite:function(){var e=this,t=app.operationFactory(app.currentUser.userid);t.weiboid=this.weiboID,this.$http.post("/favourite/delete",t).then(function(){e.$dispatch("weiboFavouritCancelled",e.weiboID),e.showCancelFavouritePopup=!1})}},events:{show:function(e){this.weiboID=e,this.showCancelFavouritePopup=!0}},components:{popup:n.default}}},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),n=s(o);t.default={data:function(){return{showFavouriteSuccess:!1}},events:{show:function(){this.showFavouriteSuccess=!0}},components:{popup:n.default}}},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),n=s(o),r=i(11),a=s(r);t.default={props:["currentUser"],data:function(){return{weibo:{user:{}},showForward:!1}},events:{show:function(e){this.weibo=e,this.showForward=!0},newWeiboSended:function(){return this.showForward=!1,!0}},components:{popup:n.default,publishContainer:a.default}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1);t.default={props:["isSingleWeibo","weibo"],data:function(){return{commentExpanded:!1,forwardExpanded:!1}},ready:function(){function e(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null}this.isSingleWeibo&&("repost"==e("type")?this.expandForward():this.expandComment())},methods:{expandComment:function(){return this.isSingleWeibo?(this.commentExpanded=!0,this.forwardExpanded=!1,void this.$dispatch("expandComment")):(this.commentExpanded=!this.commentExpanded,void(this.commentExpanded?this.$dispatch("expandComment"):this.$dispatch("closeComment")))},expandForward:function(){this.isSingleWeibo&&(this.forwardExpanded=!0,this.commentExpanded=!1),(this.isSingleWeibo||!this.weibo.forward_weiboid||this.weibo.forwardWeibo)&&this.$dispatch("expandForward",this.weibo)},favouriteWeibo:function(){var e=this;if(this.weibo.favourited)this.$dispatch("cancelFavourite",this.weibo.weiboid);else{var t=s.app.operationFactory(s.app.currentUser.userid);t.weiboid=this.weibo.weiboid,this.$http.post("/favourite",t).then(function(){e.$dispatch("weiboFavourited"),e.weibo.favourited=!0})}},likeWeibo:function(){var e=this,t=!this.weibo.liked,i=t?"/like":"/like/delete",o=s.app.operationFactory(s.app.currentUser.userid);o.weiboid=this.weibo.weiboid,this.$http.post(i,o).then(function(i){e.weibo.liked=t}).then(function(){e.weibo.liked?e.weibo.like++:e.weibo.like--})}},events:{weiboFavouritCancelled:function(e){e==this.weibo.weiboid&&(this.weibo.favourited=!1)}}}},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(6),n=s(o),r=i(4),a=s(r),c=i(7),u=s(c),l=i(1);t.default={props:{isWhite:Boolean,isPopup:Boolean,isForward:Boolean,isReplyOthers:Boolean,currentUser:Object,commentid:null,weibo:{type:Object,default:function(){return{user:{}}}}},data:function(){return{inputWeibo:"",commentInputFocus:!1,successSended:!1,inputDisabled:!1,alsoComment:!1,alsoForward:!1,alsoCommentForward:!1}},methods:{submit:function(){this.isForward?(this.submitForward(),this.alsoComment&&this.submitComment()):(this.submitComment(),this.alsoForward&&this.submitForward()),this.alsoCommentForward&&this.submitCommentForward()},submitForward:function(){var e=this;if(0!=this.inputWeibo.length){this.inputDisabled=!0;var t=l.app.weiboFactory(l.app.currentUser);t.text=this.inputWeibo,t.ats=l.app.getAts(t.text),t.forward_weiboid=this.weibo.forwardWeibo?this.weibo.forwardWeibo.weiboid:this.weibo.weiboid,this.$http.post("/weibo",t).then(function(e){var i=e.data;t.weiboid=i.id}).then(function(){e.weibo.forward++,e.inputWeibo="",e.successSended=!0,t.forwardWeibo=e.weibo.forwardWeibo?e.weibo.forwardWeibo:e.weibo,setTimeout(function(){e.successSended=!1,e.$dispatch("newWeiboSended",t),e.inputDisabled=!1},2e3)})}},submitComment:function(){var e=this;if(0!=this.inputWeibo.length){this.inputDisabled=!0;var t=l.app.commentFactory(l.app.currentUser);t.weiboid=this.weibo.weiboid,this.isReplyOthers&&(t.comment_commentid=this.commentid),t.text=this.inputWeibo,this.$http.post("/comment",t).then(function(i){t.commentid=i.data.id,e.inputWeibo="",e.successSended=!0,e.$dispatch("newCommentSended",t),e.inputDisabled=!1})}},submitCommentForward:function(){var e=l.app.commentFactory(l.app.currentUser);e.weiboid=this.weibo.forwardWeibo.weiboid,e.text=this.inputWeibo,e.ats=l.app.getAts(e.text),this.$http.post("/comment",e)},enterSubmit:function(e){this.ctrlPressed&&13==e.keyCode&&this.submit(),e.stopPropagation()}},events:{show:function(){var e=this;setTimeout(function(){e.isForward?e.inputWeibo="//@"+e.weibo.user.username+" : "+e.weibo.text:e.inputWeibo="回复@"+e.weibo.user.username+" :"},0)},emotion:function(e){this.inputWeibo+=e}},watch:{weibo:function(e,t){e.forwardWeibo?this.inputWeibo="//@"+e.user.username+" : "+e.text:this.inputWeibo="转发微博"}},components:{autoresizeTextarea:n.default,userAvatar:a.default,emotion:u.default}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _emotions=__webpack_require__(5);exports.default={props:["weiboText","keywords"],partials:{weiboTextPart:"<span></span>"},created:function(){this.weiboText&&(this.$options.partials.weiboTextPart=this.compileText(this.weiboText.trim()))},methods:{compileText:function compileText(text){var atRegex=/(@[0-9a-zA-Z_\u0391-\uFFE5-]+$)|(@[0-9a-zA-Z_\u0391-\uFFE5-]+\s)/g;text=text.replace(atRegex,function(e){console.log(e);var t=e.substr(1).trim();return('\n          <user-card name="'+t+'">\n            <a href="/user/name/'+t+'"><span>@'+t+"</span></a>\n          </user-card>").trim()});var topicRegex=/#[0-9a-zA-Z\u0391-\uFFE5]+#/g;if(this.keywords&&""!=this.keywords){var htmlCode=/"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g;this.keywords=this.keywords.replace(htmlCode,function(e){var t=e.charCodeAt(0),i=["&#"];return t=32==t?160:t,i.push(t),i.push(";"),i.join("")}),console.log(this.keywords),text=text.replace(eval("/"+this.keywords+"/g"),function(e){return'<span class="red">'+e+"</span>"})}for(var i=0;i<_emotions.emotions.length;i++)text=text.replace(eval("/\\"+_emotions.emotions[i].text+"/g"),function(e){return"<img src="+_emotions.emotions[i].src+" />"});return text}}}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){e.exports=' <popup class="cancel-favourite popup-wrapper" :show.sync=showCancelFavouritePopup> <span slot=title>取消收藏</span> <div class=popup-body-wrapper slot=body> <div class=cancel-favourite-tip> <div> <i class="icon icon-background questionB"></i> </div> <div class=text>确定要取消收藏吗</div> </div> <div class=button-wrapper> <button type=button @click=cancelWeiboFavourite>确定</button> <button type=button @click="showCancelFavouritePopup=false" class=cancel>取消</button> </div> </div> </popup> '},function(e,t){e.exports=' <popup class="favourite popup-wrapper" :show.sync=showFavouriteSuccess> <span slot=title>收藏</span> <div class=popup-body-wrapper slot=body> <div class=favourite-success-tip> <div> <i class="icon icon-background send-success"></i> </div> <div class=text>收藏成功</div> </div> <div class=button-wrapper> <button type=button @click="showFavouriteSuccess=false">确定</button> </div> </div> </popup> '},function(e,t){e.exports=' <popup class="forward popup-wrapper" :show.sync=showForward> <span slot=title>转发微博</span> <div class=popup-body slot=body> <publish-container :is-popup=true :is-forward=true :is-white=true :weibo.sync=weibo :current-user=currentUser v-ref:publish-container></publish-container> </div> </popup> '},function(e,t){e.exports=' <div class=single-weibo-operation> <ul class="WB_row_line WB_row_r4 clearfix S_line2"> <li :class="{\'favourited\': weibo.favourited }"> <a href=javascript:void(0); class=S_txt2 @click=favouriteWeibo> <span class="line S_line1"> <span> <em class="W_ficon ficon_favorite S_ficon">û</em><em>{{weibo.favourited ? \'已收藏\' : \'收藏\'}}</em> </span> </span> </a> </li> <li :class="{\'open\': forwardExpanded}"> <a href=javascript:void(0); class=S_txt2 @click=expandForward> <span class="line S_line1"> <span> <em class="W_ficon ficon_forward S_ficon"></em><em>{{weibo.forward>0 ? weibo.forward : \'转发\'}}</em> </span> </span> </a> </li> <li :class="{\'open\': commentExpanded}"> <a href=javascript:void(0); class=S_txt2 @click=expandComment> <span class="line S_line1"> <span> <em class="W_ficon ficon_repeat S_ficon"></em><em>{{weibo.comment>0 ? weibo.comment : \'评论\'}}</em> </span> </span> </a> </li> <li> <a href=javascript:; class=S_txt2 @click=likeWeibo :class="{\'liked\': weibo.liked}"> <span class="line S_line1"> <span> <em class="W_ficon ficon_praised S_txt2">ñ</em><em>{{weibo.like>0 ? weibo.like : \'赞\'}}</em> </span> </span> </a> </li> </ul> </div> '},function(e,t){e.exports=' <div class=publish-container :class="{\'transparent\': isWhite, \'forward\': isForward, \'popup\':isPopup }"> <user-avatar size=30 class=avatar v-if="!isPopup && !isForward" :src=currentUser.avatar :userid=currentUser.userid></user-avatar> <div class=right> <div class=input-wrapper :class="{\'focus\': commentInputFocus}"> <autoresize-textarea :init_height="isForward ? 48 : 20" @focus="commentInputFocus=true" @blur="commentInputFocus=false" :placeholder="isForward ? \'请输入转发理由\' : false" :model.sync=inputWeibo :disabled=inputDisabled @keydown.stop=enterSubmit @keydown.17="ctrlPressed=true" @keyup.17="ctrlPressed=false" @keyup.stop=false></autoresize-textarea> <span class=word-tip :class="{\'red\': inputWeibo.length>140}" v-if=isForward> <span>{{140 - inputWeibo.length}}</span> </span> <div class=success-sended-tip v-show=successSended v-if=isForward> <i class="icon icon-background send-success"></i> <span>发布成功</span> </div> </div> <div class="publish-options clrfloat"> <div class=pull-right> <button type=button @click=submit :disabled="!(inputWeibo.length>0&&inputWeibo.length<=140) || inputDisabled"> <i class=W_loading v-show=inputDisabled></i> <span v-show=inputDisabled> {{isForward ? \'转发中...\' : \'评论中...\'}} </span> <span v-show=!inputDisabled> {{isForward ? \'转发\' : \'评论\'}} </span> </button> </div> <div class="options clrfloat"> <span class="icons pull-left"> <emotion></emotion> </span> <div class="selections pull-left"> <ul> <li v-if=isForward> <label> <input type=checkbox v-model=alsoComment /> <span>同时评论给{{weibo.user.username}}</span> </label> </li> <li v-if=!isForward> <label> <input type=checkbox v-model=alsoForward /> <span>同时转发到我的微博</span> </label> </li> <li v-if=weibo.forwardWeibo> <label> <input type=checkbox v-model=alsoCommentForward /> <span>同时评论给原文作者{{weibo.forwardWeibo.user.username}}</span> </label> </li> </ul> </div> </div> </div> </div> </div> ';
},function(e,t){e.exports=" <div class=weibo-text> <partial name=weiboTextPart></partial> </div> "},function(e,t,i){var s,o,n={};i(50),s=i(44),o=i(56),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){var s,o,n={};i(51),s=i(45),o=i(57),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){var s,o,n={};i(52),s=i(46),o=i(58),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){var s,o,n={};i(53),s=i(47),o=i(59),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={userid:"987654321",username:"xingo",avatar:"http://tva2.sinaimg.cn/crop.802.675.420.420.180/6b8bbe7ejw8f8ixud41otj21kw17uqmz.jpg"},s={user:i,text:"好天气就要@测试 ，大家说是不是啊！[哈哈]",time:"1479649004555",commentid:"432311",like:350,liked:!1},o={user:i,userid:"987654321",username:"xingo",commentid:"1234343",text:"好天气就要@测试 ，大家说是不是啊！[哈哈]",time:"1479649004555",like:350,liked:!1},n={total:90,comments:[s,o]};t.comments=n},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(4),n=s(o),r=i(21),a=s(r),c=i(11),u=s(c);t.default={props:["weibo","isForward","currentUser"],data:function(){return{showReplyWrapper:!1}},methods:{likeComment:function(){var e=this,t=!this.weibo.liked,i=t?"/like":"/like/delete",s=app.operationFactory(app.currentUser.userid);this.isForward?s.weiboid=this.weibo.weiboid:s.commentid=this.weibo.commentid,this.$http.post(i,s).then(function(i){e.weibo.liked=t}).then(function(){e.weibo.liked?e.weibo.like++:e.weibo.like--})},toggleReplyWrapper:function(){this.$refs.publishContainer.$emit("show"),this.showReplyWrapper=!this.showReplyWrapper}},components:{weiboText:a.default,userAvatar:n.default,publishContainer:u.default}}},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(21),n=s(o),r=i(4),a=s(r),c=i(65),u=s(c);t.default={props:["weibo","isSingleWeibo","keywords","currentUser"],ready:function(){},methods:{forwardWeiboLike:function(){var e=this,t=!this.weibo.forwardWeibo.liked,i=t?"/like":"/like/delete",s=app.operationFactory(app.currentUser.userid);s.weiboid=this.weibo.forwardWeibo.weiboid,this.$http.post(i,s).then(function(i){e.weibo.forwardWeibo.liked=t}).then(function(){e.weibo.forwardWeibo.liked?e.weibo.forwardWeibo.like++:e.weibo.forwardWeibo.like--})},deleteWeibo:function(e){var t=this;this.$http.delete("/weibo/"+e).then(function(){t.$dispatch("weiboDeleted",t.weibo)})}},components:{weiboText:n.default,userAvatar:a.default,operation:u.default}}},,,function(e,t){},function(e,t){},function(e,t){},,,function(e,t){e.exports=" <div class=expand-operation-wrapper> <slot></slot> </div> "},function(e,t){e.exports=' <div class=single-list-weibo> <user-avatar size=30 class=avatar :src=weibo.user.avatar :userid=weibo.user.userid></user-avatar> <div class=content> <div class=weibo-text> <user-card :userid=weibo.user.userid> <a href=/user/{{weibo.user.userid}} class=name-title-link>{{weibo.user.username}}</a> </user-card>：<weibo-text class=text :weibo-text=weibo.text></weibo-text> </div> <div class="func clrfloat"> <span class=time>{{weibo.time | showTime}}</span> <div class="operation pull-right"> <ul class=clrfloat> <li class=pull-left> <span class="line S_line1"> <a href=javascript:void(0); class=S_txt1 @click=toggleReplyWrapper>{{isForward ? \'转发\' : \'回复\'}}</a> </span> </li> <li class=pull-left> <span class="line S_line1"> <a href=javascript:void(0); class=S_txt1 :class="{\'liked\': weibo.liked }" @click=likeComment> <em class="W_ficon ficon_praised S_txt2">ñ</em><em>{{weibo.like>0 ? weibo.like : \'赞\'}}</em> </a> </span> </li> </ul> </div> <div class=replyWrapper v-show=showReplyWrapper> <publish-container :current-user=currentUser :weibo=weibo :is-popup=true :is-forward=isForward v-ref:publish-container :is-reply-others=true :commentid=weibo.commentid></publish-container> </div> </div> </div> </div> '},function(e,t){e.exports=' <div class=weibo-single-weibo> <div class=upper> <div class=avatar> <user-avatar size=50 :src=weibo.user.avatar :userid=weibo.user.userid></user-avatar> </div> <div class=right> <div class=nickname-title> <user-card :userid=weibo.user.userid> <a href=/user/{{weibo.user.userid}} class=name-title-link>{{weibo.user.username}}</a> </user-card> </div> <div class=weibo-text-content> <weibo-text :weibo-text=weibo.text :keywords=keywords></weibo-text> </div> <div class=forward-weibo v-if=weibo.forwardWeibo> <div class=content-wrapper> <div class=nickname-title> <user-card :userid=weibo.forwardWeibo.user.userid> <a href=/user/{{weibo.forwardWeibo.user.userid}} class=name-title-link>@{{weibo.forwardWeibo.user.username}}</a> </user-card> </div> <div class=weibo-text-content> <weibo-text :weibo-text=weibo.forwardWeibo.text :keywords=keywords></weibo-text> </div> <div class="time-func clrfloat"> <div class="time pull-left"> <a href=/weibo/{{weibo.forwardWeibo.weiboid}}>{{weibo.forwardWeibo.time | showTime}}</a> </div> <div class=pull-right> <ul> <li> <span class="line S_line1"> <a class=S_txt2 target=_blank href="/weibo/{{weibo.forwardWeibo.weiboid}}?type=repost"> <span><em class="W_ficon ficon_forward S_ficon"></em><em>{{weibo.forwardWeibo.forward>0 ? weibo.forwardWeibo.forward : \'转发\'}}</em></span> </a> </span> </li> <li> <span class="line S_line1"> <a class=S_txt2 target=_blank href=/weibo/{{weibo.forwardWeibo.weiboid}}> <span><em class="W_ficon ficon_repeat S_ficon"></em><em>{{weibo.forwardWeibo.forward>0 ? weibo.forwardWeibo.comment : \'评论\'}}</em></span> </a> </span> </li> <li :class="{\'liked\': weibo.forwardWeibo.liked}"> <span class="line S_line1"> <a class=S_txt2 href=javascript:void(0); @click=forwardWeiboLike> <span><em class="W_ficon ficon_praised S_txt2">ñ</em><em>{{weibo.forwardWeibo.like>0 ? weibo.forwardWeibo.like : \'赞\'}}</em></span> </a> </span> </li> </ul> </div> </div> </div> </div> <div class=forward-weibo v-if="!weibo.forwardWeibo && weibo.forward_weiboid"> <div class=content-wrapper> <div class=deleted> 该微博已被删除 </div> </div> </div> <div class=time> <a href=/weibo/{{weibo.weiboid}}>{{weibo.time | showTime}}</a> </div> </div> <div class="pull-right delete-weibo-operation"> <div class=screen_box> <a href=javascript:void(0); class=toggle-link><i class="W_ficon ficon_arrow_down S_ficon">c</i></a> <div class=layer_menu_list node-type=fl_menu_right style="position: absolute; z-index: 999"> <ul> <li><a href=/report/{{weibo.weiboid}} target=_blank>举报</a></li> <li><a href=javascript:; @click=deleteWeibo(weibo.weiboid) v-if="weibo.user.userid == currentUser.userid">删除</a></li> </ul> </div> </div> </div> </div> <div class=lower> <operation class=operation :weibo=weibo :is-single-weibo=isSingleWeibo></operation> </div> </div> '},,,function(e,t,i){var s,o,n={};i(74),s=i(69),o=i(79),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){var s,o,n={};i(75),s=i(70),o=i(80),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){var s,o,n={};i(76),s=i(71),o=i(81),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},,function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(86),n=s(o),r=i(84),a=s(r),c=i(85),u=s(c),l=i(11),p=s(l);i(67);t.default={props:["weibo","currentUser","keywords"],data:function(){return{showCommentWrapper:!1,commentLoaded:!1,comments:{total:0,comments:[]}}},events:{expandComment:function(){var e=this;this.showCommentWrapper=!0,this.commentLoaded||this.$http.get("/comments/"+this.weibo.weiboid).then(function(t){var i=t.data;null==i&&(i={comments:[],total:0}),e.comments=i,e.commentLoaded=!0})},closeComment:function(){this.showCommentWrapper=!1},newCommentSended:function(e){this.comments.comments.unshift(e)}},components:{singleWeibo:n.default,expandOperation:a.default,comment:u.default,publishContainer:p.default}}},function(e,t){},function(e,t){e.exports=' <div class=index-weibo-single-weibo> <single-weibo class=single-weibo-component @click="showForward=true" :weibo=weibo :is-single-weibo=false :keywords=keywords :current-user=currentUser></single-weibo> <expand-operation class="comment expand-operation-wrapper" v-show=showCommentWrapper> <div class=container v-show=commentLoaded> <publish-container :current-user=currentUser :weibo=weibo></publish-container> <div class=comment-list> <ul> <li v-for="comment in comments.comments"> <comment :weibo=comment :is-forward=false :current-user=currentUser></comment> </li> </ul> </div> <a href=/weibo/{{weibo.weiboid}} class="WB_cardmore S_txt1 S_line1 more" v-if="comments.total > 10"> <span class=more_txt>后面还有{{comments.total - 10}}条评论，点击查看<i class="W_ficon ficon_arrow_right S_ficon">a</i></span> </a> </div> <div class=loading-container v-show=!commentLoaded> <div class="empty_con clearfix"> <p class=text><i class=W_loading></i>正在加载，请稍候...</p> </div> </div> </expand-operation> </div> '},function(e,t,i){var s,o,n={};i(89),s=i(88),o=i(90),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["targetUserCard","targetUser"],data:function(){var e=[{key:"following",link:"/follow",showText:"关注"},{key:"fans",link:"/fans",showText:"粉丝"},{key:"weibo",link:"",showText:"微博"}];return{cardLowerStatus:e}}}},function(e,t){},function(e,t){e.exports=' <div class=left-col> <ul> <li> <div class=status> <ul> <li v-for="status in cardLowerStatus"> <a href=/user/{{targetUserCard.userid}}{{status.link}}> <strong>{{targetUserCard[status.key]}}</strong> <span>{{status.showText}}</span> </a> </li> </ul> </div> </li> <li> <ul class=detail> <li class="item S_line2 clrfloat" v-if=targetUser.area> <span class="item_ico W_fl"><em class="W_ficon ficon_cd_place S_ficon">2</em></span> <span class="item_text W_fl">{{targetUser.area}}</span> </li> <li class="item S_line2 clrfloat"> <span class="item_ico W_fl"><em class="W_ficon ficon_constellation S_ficon">ö</em></span> <span class="item_text W_fl">{{targetUser.birthday}}</span> </li> <li class="item S_line2 clrfloat"> <span class="item_ico W_fl"><em class="W_ficon ficon_pinfo S_ficon">Ü</em></span> <span class="item_text W_fl">{{targetUser.intro ? targetUser.intro : \'还没有做自我介绍哦\'}}</span> </li> <li class="item S_line2 clrfloat"> <span class="item_ico W_fl"><em class="W_ficon ficon_email S_ficon">ý</em></span> <span class="item_text W_fl">{{targetUser.mail}}</span> </li> </ul> </li> </ul> </div> '},function(e,t,i){var s,o,n={};i(94),s=i(93),o=i(95),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["currentUser","user"],data:function(){return{loading:!1}},methods:{handleFollow:function(){var e=this;this.loading=!0,this.user.followed=!this.user.followed;var t=app.currentUser,i=app.operationFactory(t.userid);i.target_userid=this.user.userid,this.user.followed?this.$http.post("/follow",i).then(function(t){e.loading=!1}):this.$http.post("/follow/delete",i).then(function(t){e.loading=!1})},removeFan:function(){this.user.beFollowed=!1;var e=app.currentUser,t=app.operationFactory(e.userid);t.target_userid=this.user.userid,this.$http.post("/follower/delete",t).then(function(e){})},showUpload:function(){this.user.userid==this.currentUser.userid&&this.$dispatch("showAvatarUpload")}}}},,,function(e,t){},,,function(e,t){e.exports=' <div class=personal-header> <div class=upper> <div class=coverWrapper> <div class=cover></div> </div> <div class=shadow> <div class=pf_photo :class="{\'canSelect\': user.userid==currentUser.userid}" @click=showUpload> <img :src="(user.avatar&&user.avatar!=\'null\') ? user.avatar :\'http://tva1.sinaimg.cn/default/images/default_avatar_female_50.gif\'"/> </div> <div class=pf_username> <span>{{user.username}}</span> </div> <div class=pf_intro> <span>{{user.intro&&user.intro!=\'null\' ? user.intro : \'他还没有填自我介绍\'}}</span> </div> <div class=pf_opt v-if="user.userid!=currentUser.userid"> <ul class="opt_box clearfix"> <li class="btn_bed W_fl"> <button href=javascript:void(0); class="W_btn_d btn_34px {{user.followed ? \'hasFollowed\': \'notFollowed\'}}" :disabled=loading @click=handleFollow> <span v-if="user.followed && user.beFollowed &&!loading"> <em class="W_ficon ficon_addtwo S_ficon">Z</em>互相关注 </span> <span v-if="loading && user.followed "> <i class=W_loading></i>关注中 </span> <span v-if="user.followed && !user.beFollowed &&!loading"> <em class="W_ficon ficon_right S_ficon">Y</em>已关注 </span> <span v-if="loading && !user.followed "> <i class=W_loading></i>取消关注中 </span> <span v-if="!user.followed && user.beFollowed &&!loading"> <em class="W_ficon ficon_right S_ficon">Y</em><em class="W_vline S_line1"></em><em class="W_ficon ficon_add">+</em>关注 </span> <span v-if="!user.followed && !user.beFollowed && !loading"> <em class="W_ficon ficon_add S_ficon">+</em>关注 </span> </button> </li> <li class="btn_bed W_fl"> <a href=javascript:; class="W_btn_d W_btn_pf_menu btn_34px"> <em class="W_ficon ficon_menu S_ficon">=</em> </a> <div class=menu v-if=user.beFollowed> <div class=list_wrap> <div class="list_content W_f14"> <ul class=list_ul> <li class=item v-if=user.beFollowed @click=removeFan><a class=tlink>移除粉丝</a></li> </ul> </div> </div> </div> </li> </ul> </div> </div> </div> <div class=lower> <a class=current href=/user/{{user.userid}}>{{user.userid==currentUser.userid ? \'我\': \'他\'}}的主页</a> </div> </div> '},,,function(e,t,i){var s,o,n={};i(101),s=i(98),o=i(104),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),n=s(o);t.default={props:["currentUser"],data:function(){var e={};e.frameOffset={top:0,left:0};var t,i=this;return window.onresize=function(){clearTimeout(t),t=setTimeout(function(){i.setFrames()},1e3)},{weibo:{user:{}},showAvatarPopup:!1,resizer:e,canvasSize:0,showCanvas:!1,offset:{width:0,height:0},resizedImage:null,lastPoint:null,haveImg:!1}},ready:function(){return!!(Uint8Array&&HTMLCanvasElement&&atob&&Blob)&&(this.resizer.image=this.$els.img,this.resizer.frames=this.$els.frames,void(this.resizer.okButton=this.$els.okButton))},events:{show:function(){this.showAvatarPopup=!0}},methods:{clipImage:function(){var e=this,t=this.resizer.image.naturalHeight,i=this.resizer.image.naturalWidth,s=i>t?t:i;s=s>1e3?1e3:s,this.canvasSize=s,this.showCanvas=!0,this.$nextTick(function(){var t=e.$els.canvas;e.resizer.canvas=t;var o=t.getContext("2d"),n=i/e.offset.width,r=e.resizer.frameOffset.left*n,a=e.resizer.frameOffset.top*n,c=e.resizer.frameOffset.size*n,u=e.resizer.frameOffset.size*n;o.drawImage(e.resizer.image,r,a,c,u,0,0,s,s);var l=t.toDataURL();if(e.haveImg=!1,l=l.split(",")[1],!l)return e.resizer.doneCallback(null);l=window.atob(l);for(var p=new Uint8Array(l.length),d=0;d<l.length;d++)p[d]=l.charCodeAt(d);e.resizer.doneCallback(new Blob([p],{type:"image/png"}))})},resize:function(e,t){this.reset(),this.resizer.doneCallback=t,this.setFrameSize(0),this.resizer.frames.style.top=0,this.resizer.frames.style.left=0;var i=new FileReader,s=this;i.onload=function(){s.resizer.image.src=i.result,i=null,s.haveImg=!0,setTimeout(function(){s.setFrames()},0)},i.readAsDataURL(e)},reset:function(){this.resizer.image.src="",this.haveImg=!1,this.showCanvas=!1},getDefaultSize:function(){var e=this.$els.inner.offsetWidth,t=this.$els.inner.offsetHeight;return this.offset={width:e,height:t},e>t?t:e},setFrameSize:function(e){this.resizer.frameOffset.size=e,this.$els.frames.style.width=e+"px",this.$els.frames.style.height=e+"px"},moveFrames:function(e){var t=e.x,i=e.y,s=this.resizer.frameOffset.top,o=this.resizer.frameOffset.left,n=this.resizer.frameOffset.size,r=this.offset.width,a=this.offset.height;t+n+o>r?t=r-n:t+=o,i+n+s>a?i=a-n:i+=s,t=t<0?0:t,i=i<0?0:i,this.$els.frames.style.top=i+"px",this.$els.frames.style.left=t+"px",this.resizer.frameOffset.top=i,this.resizer.frameOffset.left=t},setFrames:function(){var e=this.getDefaultSize();this.setFrameSize(e)},inputChange:function(e){var t=this,i=e.target.files[0];this.resize(i,function(e){t.resizedImage=e,console.log(t)})},getOffset:function(e){var t,i;if(e.touches){var s=e.touches[0];t=s.clientX,i=s.clientY}else t=e.clientX,i=e.clientY;this.lastPoint||(this.lastPoint={x:t,y:i});var o={x:t-this.lastPoint.x,y:i-this.lastPoint.y};return this.lastPoint={x:t,y:i},o},mouseMove:function(e){if(this.lastPoint){var t=this.getOffset(e);this.moveFrames(t)}},submit:function(){var e=this;this.clipImage(),setTimeout(function(){var t=e.resizedImage,i=new FormData;i.append("uploaded_file",t),e.$http.post("/avatar",i).then(function(){window.location.reload()})},1e3)},test:function(){}},components:{popup:n.default}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(96),n=s(o),r=i(295),a=s(r),c=i(20),u=s(c),l=i(107),p=s(l),d=i(64),f=s(d),m=i(63),h=s(m),v=i(62),w=s(v),b=i(37),x=s(b),_=i(266),g=s(_);t.default={props:["timeline","currentUser","notification","targetUser","targetUserCard"],created:function(){document.title=this.targetUser.username+"的微博_微博",app.currentUser=this.currentUser},data:function(){return{}},methods:{},events:{expandForward:function(e){this.$refs.forwardPopup.$emit("show",e)},weiboFavourited:function(){this.$refs.favouriteSuccessPopup.$emit("show")},cancelFavourite:function(e){this.$refs.cancelFavouritePopup.$emit("show",e)},weiboFavouritCancelled:function(e){this.$refs.middleCol.$broadcast("weiboFavouritCancelled",e)},newWeiboSended:function(e){this.$refs.middleCol.$emit("newWeiboSended",e)},showNewWeiboPopup:function(){this.$refs.newWeiboPopup.$emit("show")},showAvatarUpload:function(){this.$refs.avatarPopup.$emit("show")}},components:{leftCol:n.default,middleCol:a.default,topNav:u.default,forwardPopup:f.default,favouriteSuccessPopup:h.default,cancelFavouritePopup:w.default,newWeiboPopup:x.default,personalHeader:p.default,avatarPopup:g.default}}},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(91),n=s(o);t.default={props:["timeline","currentUser"],data:function(){return{}},events:{},components:{singleWeibo:n.default}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,,,,,,,function(e,t){e.exports=' <popup class="avatar popup-wrapper" :show.sync=showAvatarPopup> <span slot=title>设置头像</span> <div class=popup-body slot=body> <div> <div class=wrapper> <input type=file accept=images/* @change=inputChange v-el:file> <button @click=$els.file.click() v-show="!showCanvas && !haveImg"> <em class="W_ficon ficon_add S_ficon">+</em> 选择图片</button> <div class=container> <div class=resizer :class="{\'have-img\': haveImg}"> <div class=inner v-el:inner> <img v-el:img> <div class=frames v-el:frames @mouseup="lastPoint=null" @mousedown=getOffset @mousemove=mouseMove> </div> </div> <canvas :width=canvasSize :height=canvasSize v-el:canvas v-if=showCanvas></canvas> </div> </div> </div> <div class=buttons> <button class=submit @click=submit>确认</button> <button @click="showAvatarPopup=false">取消</button> </div> </div> </div> </popup> '},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=" <div class=weibo-main-app> <top-nav :nav-now=\"currentUser.userid==currentUser.userid ? 'mypage' : ''\" :current-user=currentUser :notification=notification></top-nav> <div class=weibo-frame> <personal-header class=weibo-personal-header :current-user=currentUser :user=targetUserCard></personal-header> <left-col class=weibo-left-col :target-user-card=targetUserCard :target-user=targetUser></left-col> <middle-col class=weibo-mid-col v-ref:middle-col :timeline=timeline :current-user=currentUser></middle-col> </div> <footer> <p>服务热线：4000 960 960（个人/企业）服务时间9:00-21:00 4000 980 980（广告主）服务时间9:00-18:00 （按当地市话标准计算）</p> <p>京ICP证100780号 互联网药品服务许可证 互联网医疗保健许可证 京网文[2014]2046-296号 京ICP备12002058号 增值电信业务经营许可证B2-20140447</p> <p>Copyright © 2009-2016 WEIBO 北京微梦创科网络技术有限公司 京公网安备11000002000019号</p> </footer> <avatar-popup v-ref:avatar-popup></avatar-popup> <new-weibo-popup v-ref:new-weibo-popup :current-user=currentUser></new-weibo-popup> <forward-popup v-ref:forward-popup :current-user=currentUser></forward-popup> <cancel-favourite-popup v-ref:cancel-favourite-popup></cancel-favourite-popup> <favourite-success-popup v-ref:favourite-success-popup> </favourite-success-popup></div> "},function(e,t){e.exports=' <div> <weibo-homepage-filter></weibo-homepage-filter> <div class=weibo-wrapper> <single-weibo class=weibo-single-weibo v-for="weibo in timeline" :weibo=weibo :current-user=currentUser transition=show-weibo></single-weibo> </div> </div> '},,,,,,,,,,,function(e,t,i){var s,o,n={};i(186),s=i(129),o=i(226),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var s,o,n={};i(214),s=i(157),o=i(254),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},function(e,t,i){var s,o,n={};i(215),s=i(158),o=i(255),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(r.template=o),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})}]);